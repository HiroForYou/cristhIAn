{"componentChunkName":"component---src-templates-case-study-js","path":"/case-studies/blood-cells-detection-system","result":{"data":{"markdownRemark":{"id":"4227d2e0-0c9b-57f7-95ea-a1da29b365ae","html":"<h3 id=\"Before-starting\"><a href=\"#Before-starting\" aria-label=\"Before starting permalink\" class=\"gatsby-remark-autolink\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Before starting</h3>\n<p>Currently many Deep Learning tasks run on low-cost devices (without the need for cloud processing), which is known as Edge AI. Among the most popular devices, we have the Rasberry PI, which has an ARM architecture that can perform model inference with relative ease.</p>\n<p>On the other hand, after coordinating with my two friends (Cesar and Alexander), we embarked on the search for an application that has an impact in the real world. Finally we chose a medicine project, more specifically, a blood cell detection system. And this is how we started this project, finishing the first version after about 2 months, which I present below.</p>\n<h3 id=\"The-problem\"><a href=\"#The-problem\" aria-label=\"The problem permalink\" class=\"gatsby-remark-autolink\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The problem</h3>\n<p>Peru is characterized (to date) by having a notable inequality in access to basic health services, contrasting with urban and rural areas; where the latter has a precarious medical assistance (the inhabitants are forced to move to the cities). In this context, we investigated the main disease rates that afflict this population, finding that a large part of the children suffer from malnutrition and / or anemia. Could we detect anemia without specialized equipment? Maybe we could start with something simple to achieve it?</p>\n<p>The main idea is to be able to keep a count of the different blood components, and to be able to make an estimate of the number of red blood cells per milliliter of blood (density). In this way, we could give a quick diagnosis of the presence of anemia.</p>\n<h3 id=\"Blood-Cells-Detection-System\"><a href=\"#Blood-Cells-Detection-System\" aria-label=\"Blood Cells Detection System permalink\" class=\"gatsby-remark-autolink\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Blood Cells Detection System</h3>\n<p>With all this background, we implemented an object detection model (based on Yolo v5), trained on a public blood cell dataset, and whose inference times are relatively low. In addition, we designed an intuitive web interface that is helpful for the users of our application, allowing them to obtain blood test results graphically.</p>\n<p>The system has been designed to be executed from a raspberry that will serve the model, and it will be accessible from any device that connects to the host (without the need for an internet connection).</p>\n<p>To see how the system works, watch the demo <a href=\"https://youtu.be/IHtdHIqkBQ8\">video</a>.</p>\n<h3 id=\"Demo\"><a href=\"#Demo\" aria-label=\"Demo permalink\" class=\"gatsby-remark-autolink\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Demo</h3>\n<p><a href=\"https://github.com/Enigma-A-I/RasPi-BloodView\"><img src=\"https://github-readme-stats.vercel.app/api/pin/?username=Enigma-A-I&#x26;repo=RasPi-BloodView&#x26;show_owner=true\" alt=\"RasPi-BloodView\"></a></p>\n<p>To run the application, inside the <code class=\"language-text\">web</code> folder execute the following command.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">python index.py</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Below is a mobile interface of the system.</p>\n<p align=\"center\">\n  <img src=\"https://github.com/Enigma-A-I/RasPi-BloodView/raw/master/Blood-Detector/web/static/images/hero/final_mobile.gif\">\n</p>\n<h3 id=\"Not-everything-is-perfect-and-we-know-it\"><a href=\"#Not-everything-is-perfect-and-we-know-it\" aria-label=\"Not everything is perfect and we know it permalink\" class=\"gatsby-remark-autolink\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Not everything is perfect, and we know it</h3>\n<p>To be a first step, it was good, but we ran into a lot of problems. In the first place, we continue to obtain a relatively high inference time (and this does not suit us if we want to be able to do detection in videos), although we tried to quantize the model, we did not obtain the desired results. Another problem that is closely related to the previous one is that apparently pruning the model does not help as we thought. The third problem is the lack of a module that estimates the density of red blood cells, and predicts whether the patient has anemia or not.</p>\n<p>Although we have many problems to solve, we also have an advance of possible solutions, which I will list below (to be able to perform in a second improved version of our system):</p>\n<ul>\n<li>Using a distilled version of YOLO</li>\n<li>Use a faster backbone</li>\n<li>Keep trying to quantize the model</li>\n<li>Use a newer model, different from Yolo, and that has a shorter time (a distilled version of DERT possibly)</li>\n</ul>\n<h3 id=\"Special-thanks-\"><a href=\"#Special-thanks-\" aria-label=\"Special thanks  permalink\" class=\"gatsby-remark-autolink\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Special thanks üôèüèΩ</h3>\n<p>Many thanks to the members of ENIGMA-AI (Cesar and Alexander) for the commitment presented in the project. This work would not have been possible without team support.</p>\n<p>I hope you guys liked the project. And make sure to give it a star\non <a href=\"https://github.com/Enigma-A-I/RasPi-BloodView\">Github</a>.</p>","fields":{"slug":"/case-studies/blood-cells-detection-system"},"frontmatter":{"demo":"https://youtu.be/IHtdHIqkBQ8","iframe":"//youtube.com/embed/IHtdHIqkBQ8/?modestbranding=1&showinfo=0&autohide=1&rel=0","src":"//github.com/Enigma-A-I/RasPi-BloodView","title":"Blood Cells Detection System üî¨ü©∏","info":{"idea":"The main idea of this project is to be able to provide a blood analysis system, characterized by being easy to use and very accurate.","links":[["Pytorch ARM","https://mathinf.eu/pytorch/arm64/"]],"tech":["Pytorch","Flask","Raspberry"]}}}},"pageContext":{"slug":"/case-studies/blood-cells-detection-system"}},"staticQueryHashes":["1033876704"]}